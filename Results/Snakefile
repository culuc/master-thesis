runR = "Rscript --no-save --no-restore --verbose"
logAll = "2>&1"

# --- Dictionaries --- #
import glob
import pandas as pd


# files =
input_files = glob.glob('all_speakers/*/summary.csv')
df = pd.DataFrame(input_files,columns=['names'])
df.names = df.names.str.replace('/','_')
df.names = 'plots/' + df.names.str.replace('csv','png')

output_files=df.names


rule all:
    input:
        script = "plot_results.R",
        data = input_files

    output:
        plot = output_files
    log:
        "logs/plotlog.txt"
    shell:
     "{runR} {input.script} {input.data} \
        {output.plot}  > {log} {logAll}"



input_files_cons = glob.glob('consecutive_speakers/*/summary.csv')
df_cons = pd.DataFrame(input_files_cons,columns=['names'])
df_cons.names = df_cons.names.str.replace('/','_')
df_cons.names = 'plots/' + df_cons.names.str.replace('csv','png')

output_files_cons=df_cons.names


rule cons:
    input:
        script = "plot_results.R",
        data = input_files_cons

    output:
        plot = output_files_cons
    log:
        "logs/plotlog.txt"
    shell:
     "{runR} {input.script} {input.data} \
        {output.plot}  > {log} {logAll}"





# data   = expand("Data/{iKey}/tfidf/{iKey}_top500_scaled.csv",
#                         iKey = terms),
